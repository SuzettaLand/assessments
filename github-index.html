<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relationship Profile with Dr. Land</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: #f5f5f5;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .nav-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
        }
        .nav-link {
            padding: 12px 24px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-size: 1.1em;
            transition: background-color 0.3s;
            border: none;
            cursor: pointer;
        }
        .nav-link:hover {
            background-color: #0056b3;
        }
        .assessment-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 40px;
        }
        .assessment-card {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .assessment-card h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        .no-results {
            color: #666;
            font-style: italic;
            text-align: center;
            padding: 20px;
        }
        .contact-form {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }
        .form-group input, 
        .form-group select, 
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1em;
        }
        .form-group select {
            height: 40px;
        }
        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        .email-button {
            display: block;
            width: 200px;
            margin: 30px auto;
            padding: 15px 25px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .email-button:hover {
            background-color: #0056b3;
        }
        .problems-list {
            margin-top: 10px;
        }
        .problems-list select {
            margin-bottom: 10px;
        }
        .percentage-bar {
            background-color: #e9ecef;
            height: 20px;
            border-radius: 10px;
            margin: 5px 0;
            position: relative;
        }
        .percentage-fill {
            height: 100%;
            border-radius: 10px;
            background-color: #4CAF50;
            transition: width 0.5s ease-in-out;
        }
        .score-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 8px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        .main-result {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            background-color: #e3f2fd;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Relationship Profile with Dr. Land</h1>

        <div class="contact-form">
            <h2>Contact Information</h2>
            <div class="form-group">
                <label for="name">Your Name:</label>
                <input type="text" id="name" required>
            </div>
            <div class="form-group">
                <label for="email">Your Email:</label>
                <input type="email" id="email" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" required>
            </div>
            <div class="form-group">
                <label for="partner-name">Partner's Name:</label>
                <input type="text" id="partner-name">
            </div>
            <div class="form-group">
                <label for="partner-email">Partner's Email:</label>
                <input type="email" id="partner-email">
            </div>
            <div class="form-group">
                <label for="relationship-status">Relationship Status:</label>
                <select id="relationship-status" required>
                    <option value="">Select status...</option>
                    <option value="single-not-dating">Single and not dating</option>
                    <option value="single-dating">Single and dating serious</option>
                    <option value="engaged">Engaged</option>
                    <option value="cohabitating">Co-habitating</option>
                    <option value="married">Married</option>
                    <option value="divorced">Divorced</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label for="relationship-length">How long have you been in your relationship?</label>
                <input type="text" id="relationship-length">
            </div>
            <div class="form-group">
                <label for="relationship-satisfaction">How satisfied are you with your relationship? (1-10)</label>
                <input type="number" id="relationship-satisfaction" min="1" max="10">
            </div>
            <div class="form-group">
                <label for="change-desire">If there was one thing you could change in your relationship, what would it be?</label>
                <textarea id="change-desire" rows="3"></textarea>
            </div>

            <div class="form-group">
                <label>What are your top 3 relationship challenges?</label>
                <div class="problems-list">
                    <select id="problem1" required>
                        <option value="">Select first challenge...</option>
                        <option value="communication">Communication issues</option>
                        <option value="finances">Finances</option>
                        <option value="emotional">Emotional intimacy</option>
                        <option value="sexual">Sexual intimacy</option>
                        <option value="trust">Trust issues</option>
                        <option value="conflict">Conflict resolution</option>
                        <option value="expectations">Unclear expectations</option>
                        <option value="goals">Incompatibility in goals</option>
                        <option value="family">Family issues</option>
                        <option value="blended">Blended family issues</option>
                    </select>
                    <select id="problem2" required>
                        <option value="">Select second challenge...</option>
                        <option value="communication">Communication issues</option>
                        <option value="finances">Finances</option>
                        <option value="emotional">Emotional intimacy</option>
                        <option value="sexual">Sexual intimacy</option>
                        <option value="trust">Trust issues</option>
                        <option value="conflict">Conflict resolution</option>
                        <option value="expectations">Unclear expectations</option>
                        <option value="goals">Incompatibility in goals</option>
                        <option value="family">Family issues</option>
                        <option value="blended">Blended family issues</option>
                    </select>
                    <select id="problem3" required>
                        <option value="">Select third challenge...</option>
                        <option value="communication">Communication issues</option>
                        <option value="finances">Finances</option>
                        <option value="emotional">Emotional intimacy</option>
                        <option value="sexual">Sexual intimacy</option>
                        <option value="trust">Trust issues</option>
                        <option value="conflict">Conflict resolution</option>
                        <option value="expectations">Unclear expectations</option>
                        <option value="goals">Incompatibility in goals</option>
                        <option value="family">Family issues</option>
                        <option value="blended">Blended family issues</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>What are the top 3 things that you enjoy the most about your relationship?</label>
                <textarea id="relationship-enjoyment" rows="3"></textarea>
            </div>
        </div>

        <!-- Assessment buttons -->
        <div class="nav-links">
            <a href="github-attachment.html" class="nav-link">Take Attachment Assessment</a>
            <a href="github-communication.html" class="nav-link">Take Communication Assessment</a>
            <a href="github-personality.html" class="nav-link">Take Personality Assessment</a>
        </div>

        <!-- Results cards -->
        <div class="assessment-grid">
            <div class="assessment-card">
                <h2>Attachment Style Assessment</h2>
                <div id="attachmentContent" class="no-results">
                    No results available yet
                </div>
            </div>

            <div class="assessment-card">
                <h2>Communication Style Assessment</h2>
                <div id="communicationContent" class="no-results">
                    No results available yet
                </div>
            </div>

            <div class="assessment-card">
                <h2>Personality Assessment</h2>
                <div id="personalityContent" class="no-results">
                    No results available yet
                </div>
            </div>
        </div>

        <button class="email-button" onclick="prepareAndSendEmail()">
            Email Results
        </button>
    </div>

    <script>
        // Function to get URL parameters
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            const result = {};
            for(const [key, value] of params) {
                try {
                    result[key] = JSON.parse(decodeURIComponent(value));
                } catch {
                    result[key] = value;
                }
            }
            return result;
        }

        // Function to get selected problems
        function getSelectedProblems() {
            const problem1 = document.getElementById('problem1').value;
            const problem2 = document.getElementById('problem2').value;
            const problem3 = document.getElementById('problem3').value;
            return [problem1, problem2, problem3]
                .filter(p => p)
                .map(p => document.querySelector(`#problem1 option[value="${p}"]`).textContent);
        }

        function formatContactInfo() {
            return `
Contact Information:
Name: ${document.getElementById('name').value}
Email: ${document.getElementById('email').value}
Phone: ${document.getElementById('phone').value}
Partner's Name: ${document.getElementById('partner-name').value}
Partner's Email: ${document.getElementById('partner-email').value}
Relationship Status: ${document.getElementById('relationship-status').value}
Relationship Length: ${document.getElementById('relationship-length').value}
Relationship Satisfaction (1-10): ${document.getElementById('relationship-satisfaction').value}

Desired Change: ${document.getElementById('change-desire').value}

Top 3 Relationship Challenges:
${getSelectedProblems().join('\n')}

Things Enjoyed Most:
${document.getElementById('relationship-enjoyment').value}
`;
        }

        function formatAssessmentResults() {
            const params = getUrlParams();
            let results = '\n\nAssessment Results:\n\n';

            if (params.attachment) {
                results += 'ATTACHMENT STYLE ASSESSMENT\n';
                results += `Dominant Style: ${params.attachment.dominant}\n`;
                results += 'Score Breakdown:\n';
                Object.entries(params.attachment.scores).forEach(([style, score]) => {
                    results += `${style}: ${score} Yes responses\n`;
                });
                results += '\n';
            }

            if (params.communication) {
                results += 'COMMUNICATION STYLE ASSESSMENT\n';
                results += `Dominant Style: ${params.communication.dominant}\n`;
                results += 'Score Breakdown:\n';
                Object.entries(params.communication.scores).forEach(([style, score]) => {
                    results += `${style}: ${score} Yes responses\n`;
                });
                results += '\n';
            }

            if (params.personality) {
                results += 'PERSONALITY ASSESSMENT\n';
                results += `Personality Type: ${params.personality.type}\n`;
                results += 'Dimension Breakdown:\n';
                Object.entries(params.personality.percentages).forEach(([dimension, percentage]) => {
                    results += `${dimension}: ${Math.round(percentage)}% - ${Math.round(100 - percentage)}%\n`;
                });
            }

            return results;
        }

        function prepareAndSendEmail() {
            const emailSubject = 'Your Assessment Results';
            const emailBody = formatContactInfo() + formatAssessmentResults();
            const mailtoLink = `mailto:${document.getElementById('email').value}?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
            window.location.href = mailtoLink;
        }

        // Display assessment results on page load
        const params = getUrlParams();
        
        if (params.attachment) {
            const container = document.getElementById('attachmentContent');
            container.className = '';
            container.innerHTML = `
                <div class="main-result">
                    ${params.attachment.dominant}
                </div>
                <div class="score-breakdown">
                    ${Object.entries(params.attachment.scores).map(([style, score]) => `
                        <div class="score-item">
                            <span>${style}</span>
                            <span>${score} Yes
