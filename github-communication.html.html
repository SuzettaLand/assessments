<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Communication Style Assessment</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .question {
            margin-bottom: 20px;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        .question-text {
            margin-bottom: 10px;
        }
        .options {
            display: flex;
            gap: 20px;
        }
        .radio-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #submitBtn {
            width: 100%;
            padding: 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }
        #submitBtn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        #submitBtn:hover:not(:disabled) {
            background-color: #0056b3;
        }
        #results {
            margin-top: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Communication Style Assessment</h1>
        <form id="assessmentForm">
            <div id="questionsContainer"></div>
            <button type="button" id="submitBtn" disabled>Please answer all questions (0/14)</button>
        </form>
        <div id="results">
            <h2>Your Results</h2>
            <p id="dominantStyle"></p>
            <div id="scoreBreakdown"></div>
        </div>
    </div>

    <script>
        const questions = [
            "When in a conversation, do you tend to interrupt others and dominate the conversation?",
            "Do you find yourself getting angry or frustrated easily when communicating with others?",
            "Do you tend to avoid confrontations and disagreements?",
            "Do you have difficulty saying \"no\" to others, even when you want to?",
            "Are you comfortable expressing your opinions and feelings in a calm and respectful manner?",
            "Do you tend to criticize or blame others when things go wrong?",
            "Do you use humor or sarcasm to express your frustrations or criticisms?",
            "Are you confident in your ability to communicate effectively with others?",
            "Do you find it difficult to express your needs or wants to others?",
            "Do you tend to shut down or withdraw when faced with conflict or disagreement?",
            "Are you able to listen to others without becoming defensive or dismissive of their opinions?",
            "Do you tend to manipulate situations to get what you want without directly expressing your needs or wants?",
            "Are you able to speak up for yourself without being disrespectful or aggressive towards others?",
            "Do you tend to compromise your own needs or values in order to avoid conflict or confrontation?"
        ];

        const categoryMapping = {
            AG: [0, 1, 5],           // Aggressive
            PA: [2, 3, 8, 9],        // Passive
            PAG: [6, 11, 13],        // Passive-Aggressive
            AS: [4, 7, 10, 12]       // Assertive
        };

        const styleNames = {
            AG: "Aggressive Communication",
            PA: "Passive Communication",
            PAG: "Passive-Aggressive Communication",
            AS: "Assertive Communication"
        };

        // Initialize the form
        const questionsContainer = document.getElementById('questionsContainer');
        const submitBtn = document.getElementById('submitBtn');
        const results = document.getElementById('results');
        let answers = {};

        // Create questions
        questions.forEach((question, index) => {
            const questionDiv = document.createElement('div');
            questionDiv.className = 'question';
            questionDiv.innerHTML = `
                <div class="question-text">
                    <strong>${index + 1}.</strong> ${question}
                </div>
                <div class="options">
                    <label class="radio-option">
                        <input type="radio" name="question${index}" value="yes"> Yes
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="question${index}" value="no"> No
                    </label>
                </div>
            `;
            questionsContainer.appendChild(questionDiv);
        });

        // Handle radio button changes
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const questionIndex = parseInt(e.target.name.replace('question', ''));
                answers[questionIndex] = e.target.value === 'yes';
                updateSubmitButton();
            });
        });

        function updateSubmitButton() {
            const answeredCount = Object.keys(answers).length;
            submitBtn.disabled = answeredCount < questions.length;
            submitBtn.textContent = answeredCount < questions.length ? 
                `Please answer all questions (${answeredCount}/${questions.length})` : 
                'Show Results';
        }

        function calculateResults() {
            const scores = {
                AG: 0,
                PA: 0,
                PAG: 0,
                AS: 0
            };

            Object.entries(categoryMapping).forEach(([category, questionIndices]) => {
                questionIndices.forEach(index => {
                    if (answers[index] === true) {
                        scores[category]++;
                    }
                });
            });

            const maxScore = Math.max(...Object.values(scores));
            const dominantStyles = Object.entries(scores)
                .filter(([_, score]) => score === maxScore)
                .map(([style]) => styleNames[style]);

            return {
                scores,
                dominant: dominantStyles.join(' / ')
            };
        }

        submitBtn.addEventListener('click', () => {
            const result = calculateResults();
            
            // Display results on current page
            document.getElementById('results').style.display = 'block';
            document.getElementById('dominantStyle').textContent = `Your dominant communication style is: ${result.dominant}`;
            
            const scoreBreakdown = document.getElementById('scoreBreakdown');
            scoreBreakdown.innerHTML = '';
            Object.entries(result.scores).forEach(([style, score]) => {
                const scoreDiv = document.createElement('div');
                scoreDiv.className = 'score-item';
                scoreDiv.innerHTML = `
                    <span>${styleNames[style]}</span>
                    <span>${score} Yes responses</span>
                `;
                scoreBreakdown.appendChild(scoreDiv);
            });

            // Encode results for URL
            const resultsParam = encodeURIComponent(JSON.stringify({
                dominant: result.dominant,
                scores: result.scores
            }));

            // Redirect to results page with parameters
            window.location.href = 'https://suzettaland.github.io/assessments/index.html?communication=' + resultsParam;
        });
    </script>
</body>
</html>